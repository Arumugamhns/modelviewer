<!DOCTYPE html>
<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html lang="en">

<head>
  <title>Audi A6</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="demo-styles.css">
  <link rel="stylesheet" href="style.css">

  <!-- The following libraries and polyfills are recommended to maximize browser support -->
  <!-- NOTE: you must adjust the paths as appropriate for your project -->

  <!-- 游뚿 REQUIRED: Web Components polyfill to support Edge and Firefox < 63 -->
  <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.1.3/webcomponents-loader.js"></script>

  <!-- 游누 OPTIONAL: Intersection Observer polyfill for better performance in Safari and IE11 -->
  <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>

  <!-- 游누 OPTIONAL: Resize Observer polyfill improves resize behavior in non-Chrome browsers -->
  <script src="https://unpkg.com/resize-observer-polyfill@1.5.0/dist/ResizeObserver.js"></script>

  <!-- 游누 OPTIONAL: Fullscreen polyfill is needed to fully support AR features -->
  <script src="https://unpkg.com/fullscreen-polyfill@1.0.2/dist/fullscreen.polyfill.js"></script>

  <!-- 游누 OPTIONAL: Include prismatic.js for Magic Leap support -->
  <script src="https://unpkg.com/@magicleap/prismatic/prismatic.min.js"></script>

  <!-- 游누 OPTIONAL: The :focus-visible polyfill removes the focus ring for some input types -->
  <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>

  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.js"></script>

  <script type="module" src="https://unpkg.com/@google/model-viewer@0.3.1/dist/model-viewer.js"></script>

  <!-- Loads <model-viewer> for old browsers like IE11: -->
  <script nomodule src="https://unpkg.com/@google/model-viewer@0.3.1/dist/model-viewer-legacy.js"></script>
  <style>

  </style>
</head>
<span class="logo">
  <ul class="logo_list">
    <li><img src="images/audilogo.png"></li>
    <li><img src="images/A6.png"></li>
  </ul>
</span>
<!--span class="inst_360" style="position: absolute; text-align: center;"><img src="images/360-button.png"></span-->

<model-viewer src="third_party/a6/a6.glb" id="lazy-load" ar ar-modes="webxr scene-viewer quick-look fallback"
  ar-scale="30%" camera-controls camera-orbit="0deg 75deg 30m" max-camera-orbit="Infinity 80.5deg 80deg"
  field-of-view="50deg" max-field-of-view="45deg" min-field-of-view="-130deg" interaction-prompt="auto"
  interaction-policy="always-allow" interaction-prompt-style="wiggle" shadow-intensity="5"
  quick-look-browsers="safari chrome" ios-src="third_party/a6/audia6.usdz" data-js-focus-visible alt="Audi A6 WebAR">

  <button slot="ar-button" style="background-color: #000000;
                display: flex;
                justify-content: center;
                align-items: center;
                height: 44px;
                width: 105px;
                color: #ffffff;
                border: none;
                float:right;  position: absolute;top: 45px; right: 16px; ">
    Activate AR
  </button>
  <!--button slot="hotspot-1" class="hotspot" data-position="-0.02658798732864385m 0.5665576547770742m 0.009121507970925237m" data-normal="-0.006086936267878379m 0.11258656173247557m -0.9936232763598738m" onclick="foo()"><div class="annotation">data-position:
    -0.02658798732864385m 0.5665576547770742m 0.009121507970925237m
    data-normal:
    -0.006086936267878379m 0.11258656173247557m -0.9936232763598738m</div></button-->
  <!--button slot="hotspot-2" class="hotspot" data-position="-0.856220320485195m 0.8130342423605037m -0.018299614123668696m" data-normal="-0.824350654813954m 0.21103814720295916m -0.5252703097767354m"></button>
  <button slot="hotspot-1" class="hotspot" data-position="-0.6733069043894987m 0.6434413617286839m 2.1964927487541694m" data-normal="-0.6821452354140144m 0.6986820625659036m -0.21568786069367374m"></button-->
  <div id="lazy-load-poster" slot="poster"></div>
  <div id="progress" slot="progress-bar">
    <div class="center">
      <div class="skillbar">
        <div class="skill_perecentage">
          <div class="skill_level" style="width: 85%">
          </div>
        </div>
      </div>
    </div>
  </div>
</model-viewer>
<footer>
  <div class="colorize">   
    <div class="info">
      <img src="images/info.png" id="myBtn">
    </div>
  </div>
  <!-- The Modal -->
  <div id="myModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <img src="images/AR-tap.png">
      <p>&nbsp;TAP on the screen to place your vehicle</p>
      <img src="images/Ar-zoom.png">
      <p>&nbsp;PINCH to Zoom in and out your vehicle</p>
      <img src="images/Ar-move.png">
      <p>&nbsp;PRESS and DRAG Vehicle to move the vehicle</p>
    </div>
  </div>


</footer>
</body>
<script>
  // Get the modal
  var modal = document.getElementById("myModal");

  // Get the button that opens the modal
  var btn = document.getElementById("myBtn");

  // Get the <span> element that closes the modal
  var span = document.getElementsByClassName("close")[0];

  // When the user clicks the button, open the modal 
  btn.onclick = function () {
    modal.style.display = "block";
  }

  // When the user clicks on <span> (x), close the modal
  span.onclick = function () {
    modal.style.display = "none";
  }

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function (event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }

  function foo() {
    (() => {
      const modelViewer = document.querySelector('#lazy-load')
      self.setInterval(() => {
        modelViewer.play();
        modelViewer.animationName = modelViewer.animationName === 'Take 001' ?
          'Idle' : 'Take 001';

      }, 1500.0);
    })();

  }

  const modelViewer = document.querySelector('model-viewer');
  const progress = document.querySelector('#progress');
  const bar = progress.querySelector('.center');

  modelViewer.addEventListener('progress', (event) => {
    const { totalProgress } = event.detail;
    progress.classList.toggle('show', totalProgress < 1);
    bar.style.transform = `scaleX(${totalProgress})`;
  });


</script>

<!--a href="interior/output/index.html">Click here for Interior</a-->

</html>